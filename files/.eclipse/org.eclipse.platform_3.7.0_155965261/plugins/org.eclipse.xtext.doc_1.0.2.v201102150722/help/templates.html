<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Template Proposals</title>
<link href="book.css" rel="stylesheet" type="text/css">
<meta content="DocBook XSL Stylesheets V1.75.1" name="generator">
<link rel="home" href="index.html" title="Xtext User Guide">
<link rel="up" href="IDEConcepts.html" title="IDE Concepts">
<link rel="prev" href="quickfixes.html" title="Quick Fixes">
<link rel="next" href="outline.html" title="Outline View">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<h1 xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0">Template Proposals</h1>
<p>Xtext-based editors automatically support code templates. That means that you get the corresponding 
				preference page where users can add and change template proposals. If you want to ship a couple of 
				default templates, you have to put a file named 
				<span class="emphasis"><em>templates.xml</em></span> inside the 
				<span class="emphasis"><em>templates</em></span> directory of 
				the generated UI-plug-in. This file contains templates in a format as described in the 

				<a class="ulink" href="http://help.eclipse.org/ganymede/topic/org.eclipse.cdt.doc.user/tasks/cdt_t_imp_code_temp.htm" target="_new">Eclipse online help</a> .
			</p>
<p>
				
</p>
<div class="mediaobject">
<img src="images/preferences_templates.png"></div>
<p>
			
</p>
<p>By default Xtext registers 
				<span class="emphasis"><em>ContextTypes</em></span> for each rule (
				<span class="emphasis"><em>.[RuleName]</em></span>) and for each 
				keyword (
				<span class="emphasis"><em>.kw</em></span>[keyword]_). If you don&rsquo;t 
				like these defaults you&rsquo;ll have to subclass 

				<a class="ulink" href="http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.tmf/org.eclipse.xtext/plugins/org.eclipse.xtext.ui/src/org/eclipse/xtext/ui/editor/templates/XtextTemplateContextTypeRegistry.java?root=Modeling_Project&view=co" target="_new">XtextTemplateContextTypeRegistry</a> 
				and configure it via 
				<a class="link" href="dependencyInjection.html#guicemodules" title="The Module API">Guice</a>. 
			</p>
<p>In addition to the standard template proposal extension mechanism, Xtext ships with a predefined set 
				of 
				<span class="emphasis"><em>TemplateVariableResolvers</em></span> to resolve special variable types inside a given template 
				(i.e. 
				<span class="emphasis"><em>TemplateContext</em></span>). Besides the standard template variables available in 

				<span class="emphasis"><em>org.eclipse.jface.text.templates.GlobalTemplateVariables</em></span> like 
				<span class="emphasis"><em>${user}</em></span>, 
				<span class="emphasis"><em>${date}</em></span>, 
				<span class="emphasis"><em>${time}</em></span>, 

				<span class="emphasis"><em>${cursor}</em></span>, etc., these 
				<span class="emphasis"><em>TemplateVariableResolver</em></span> support the automatic resolving of 
				CrossReferences (type 
				<span class="emphasis"><em>CrossReferences</em></span>) and Enumerations (type 
				<span class="emphasis"><em>Enum</em></span>) like it is explained in the 
				following sections.
			</p>
<p>It is best practice to edit the templates in the preferences page, export them into the 

				<span class="emphasis"><em>templates.xml</em></span>-file and put this one into the 
				<span class="emphasis"><em>templates</em></span> folder of your UI-plug-in. However, these 
				templates will not be visible by default. To fix it, you have to manually edit the xml-file and insert 
				an ID attribute for each template element.
			</p>
<div class="section" title="CrossReference TemplateVariableResolver">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="CrossReferenceTemplateVariableResolver"></a>CrossReference TemplateVariableResolver</h3>
</div>
</div>
</div>
<p>Xtext comes with a specific template variable resolver 
					<span class="emphasis"><em>TemplateVariableResolver</em></span> called 

					<a class="ulink" href="http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.tmf/org.eclipse.xtext/plugins/org.eclipse.xtext.ui/src/org/eclipse/xtext/ui/editor/templates/CrossReferenceTemplateVariableResolver.java?root=Modeling_Project&view=co" target="_new">CrossReferenceTemplateVariableResolver</a>, 
					which can be used to place cross-references within a template.
				</p>
<p>The syntax is as follows:</p>
<div class="literallayout">
<p>
<code class="code">${&lt;displayText&gt;:CrossReference([&lt;MyPackageName&gt;.]&lt;MyType&gt;.&lt;myRef&gt;)}<br>

</code>
</p>
</div>
<p>For example the following template:</p>
<div class="literallayout">
<p>
<code class="code">&lt;template&nbsp;name="transition"&nbsp;description="event&nbsp;transition"&nbsp;id="transition"<br>
&nbsp;&nbsp;context="org.eclipse.xtext.example.FowlerDsl.Transition"&nbsp;enabled="true"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;${event:CrossReference('Transition.event')}&nbsp;=&gt;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;	${state:CrossReference('Transition.state')<br>
&lt;/template&gt;<br>

<br>

</code>
</p>
</div>
<p>yields the text 
					<span class="emphasis"><em>event =&gt; state</em></span> and allows selecting any events and states using a drop down.
				</p>
<p>
					
</p>
<div class="mediaobject">
<img src="images/templates_crossref.png"></div>
<p>
				
</p>
</div>
<div class="section" title="Enumeration TemplateVariableResolver">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="EnumerationTemplateVariableResolver"></a>Enumeration TemplateVariableResolver</h3>
</div>
</div>
</div>
<p>The 
					<a class="ulink" href="http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.tmf/org.eclipse.xtext/plugins/org.eclipse.xtext.ui/src/org/eclipse/xtext/ui/editor/templates/EnumTemplateVariableResolver.java?root=Modeling_Project&view=co" target="_new">EnumTemplateVariableResolver</a> 
					resolves a template variable to 
					<span class="emphasis"><em>EEnumLiteral</em></span> literals
					which are assignment-compatible to the enumeration type declared as the first parameter of the the 
					<span class="emphasis"><em>Enum</em></span> 
					<span class="emphasis"><em>TemplateVariable</em></span>. 
				</p>
<p>The syntax is as follows:   </p>
<div class="literallayout">
<p>
<code class="code">${&lt;displayText&gt;:Enum([&lt;MyPackage&gt;.]&lt;EnumType&gt;)<br>

</code>
</p>
</div>
<p>For example the following template (taken from the domainmodel example):</p>
<div class="literallayout">
<p>
<code class="code">&lt;template&nbsp;name="Operation"&nbsp;description="template&nbsp;for&nbsp;an&nbsp;Operation"<br>
&nbsp;&nbsp;id="org.eclipse.xtext.example.Domainmodel.Operation"<br>
&nbsp;&nbsp;context="org.eclipse.xtext.example.Domainmodel.Operation"<br>
&nbsp;&nbsp;enabled="true"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;${visibility:Enum('Visibility')}&nbsp;op&nbsp;${name}(${cursor}):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;${type:CrossReference('Operation.type')}<br>
&lt;/template&gt;<br>

<br>

</code>
</p>
</div>
<p>yields the text 
					<span class="emphasis"><em>public op name(): type</em></span> where the display text &lsquo;public&rsquo; is replaced with a drop 
					down filled with the literal values as defined in the 
					<span class="emphasis"><em>EEnum</em></span> 
					<span class="emphasis"><em>Visibility</em></span>. Also, 
					<span class="emphasis"><em>name</em></span> and 
					<span class="emphasis"><em>type</em></span> 
					are template variables.
				</p>
<p>
					
</p>
<div class="mediaobject">
<img src="images/templates_enum.png"></div>
<p>
				
</p>
</div>
</body>
</html>
