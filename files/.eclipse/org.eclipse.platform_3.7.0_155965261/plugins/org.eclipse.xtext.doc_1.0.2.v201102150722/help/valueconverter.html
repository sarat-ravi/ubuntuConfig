<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Value Converter</title>
<link href="book.css" rel="stylesheet" type="text/css">
<meta content="DocBook XSL Stylesheets V1.75.1" name="generator">
<link rel="home" href="index.html" title="Xtext User Guide">
<link rel="up" href="RuntimeConcepts.html" title="Runtime Concepts">
<link rel="prev" href="scoping.html" title="Scoping">
<link rel="next" href="serialization.html" title="Serialization">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<h1 xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0">Value Converter</h1>
<p>Value converters are registered to convert the parsed text into a certain data type instance and vice versa.
				The primary hook is called 
				<a class="ulink" href="http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.tmf/org.eclipse.xtext/plugins/org.eclipse.xtext/src/org/eclipse/xtext/conversion/IValueConverterService.java?root=Modeling_Project&view=co" target="_new">IValueConverterService</a> 
				and the concrete implementation can be registered via the runtime 
				<a class="link" href="dependencyInjection.html#guicemodules" title="The Module API">Guice module</a>.
				To do so override the corresponding binding in your runtime module like shown in this example:
			</p>
<div class="literallayout">
<p>
<code class="code">@Override<br>
public&nbsp;Class&lt;?&nbsp;extends&nbsp;IValueConverterService&gt;&nbsp;bindIValueConverterService()&nbsp;{<br>
&nbsp;&nbsp;return&nbsp;MySpecialValueConverterService.class;<br>
}<br>

<br>

</code>
</p>
</div>
<div class="section" title="Annotation-Based Value Converters">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="AnnotationBasedValueConverters"></a>Annotation-Based Value Converters</h3>
</div>
</div>
</div>
<p>The most simple way to register additional value converters is to make use of 

					<a class="ulink" href="http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.tmf/org.eclipse.xtext/plugins/org.eclipse.xtext/src/org/eclipse/xtext/conversion/impl/AbstractDeclarativeValueConverterService.java?root=Modeling_Project&view=co" target="_new">AbstractDeclarativeValueConverterService</a>, 
					which allows to declaratively register an 
					<a class="ulink" href="http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.tmf/org.eclipse.xtext/plugins/org.eclipse.xtext/src/org/eclipse/xtext/conversion/IValueConverter.java?root=Modeling_Project&view=co" target="_new">IValueConverter</a>
					by means of an annotated method. 
				</p>
<p>If you use the common terminals grammar 
					<span class="emphasis"><em>org.eclipse.xtext.common.Terminals</em></span> you should subclass 

					<a class="ulink" href="http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.tmf/org.eclipse.xtext/plugins/org.eclipse.xtext/src/org/eclipse/xtext/common/services/DefaultTerminalConverters.java?root=Modeling_Project&view=co" target="_new">DefaultTerminalConverters</a> and override or 
					add additional value converters by adding the respective methods. In addition to the explicitly 
					defined converters in the default implementation, a delegating converter is registered for each 
					available 
					<span class="emphasis"><em>EDataType</em></span> that reuses the functionality of the corresponding EMF 
					<span class="emphasis"><em>EFactory</em></span>.
				</p>
<p>As qualified names &ndash; i.e. names composed of namespaces separated by a delimiter &ndash; are expected to occur often, we&rsquo;ve added a 
					<a class="ulink" href="http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.tmf/org.eclipse.xtext/plugins/org.eclipse.xtext/src/org/eclipse/xtext/conversion/impl/QualifiedNameValueConverter.java?root=Modeling_Project&view=co" target="_new">QualifiedNameValueConverter</a>. This one removes comments and whitespaces and delegates to another value converter for each segment, allowing individually quoted segments. The domainmodel example shows how to use it. 
				</p>
<p>The protocol of an 
					<span class="emphasis"><em>IValueConverter</em></span> allows to throw a 
					<span class="emphasis"><em>ValueConverterException</em></span> if something went wrong.
					The exception is propagated as a syntax error by the parser or as a validation problem by the 

					<span class="emphasis"><em>ConcreteSyntaxValidator</em></span> if the value cannot be converted to a valid string. The 

					<a class="ulink" href="http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.tmf/org.eclipse.xtext/plugins/org.eclipse.xtext/src/org/eclipse/xtext/conversion/impl/AbstractLexerBasedConverter.java?root=Modeling_Project&view=co" target="_new">AbstractLexerBasedConverter</a> is useful when 
					implementing a custom value converter. If the converter needs to know about the rule that it currently 
					works with, it may implement the interface 
					<span class="emphasis"><em>IValueConverter.RuleSpecific</em></span>. The framework will set the
					rule such as the implementation may use it afterwards.
				</p>
</div>
</body>
</html>
